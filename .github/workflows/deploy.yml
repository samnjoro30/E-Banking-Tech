name: Deployment to production

on:
    workflow_run:
        workflow: frontend ci
        branches:
            - main
        types: completed

jobs:
    deploy:
        if: ${{ github.event.workflow_run.conclusion == 'success'}}
        runs-on: ubuntu-latest
        concurrency: production-deploy

        steps:
            -  name: Deploy to firebase
               uses: FirebaseExtended/action-hosting-deploy@v0
               with:
                repoToken: ${{ secrets.ACESS_TOKEN }}
                firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_E_BANKING_TECH_61D82 }}
                projectId: e-banking-tech-61d82
                entryPoint: client
              

              